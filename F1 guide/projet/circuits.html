<!doctype html>
<html lang="fr">
    <head>   <!-- D√©finition d'informations qui ne s'affichent pas sur la page -->
        <meta charset="utf-8" /> <!-- Conventions d'√©criture pour assurer un affichage correct des caract√®res sp√©ciaux -->
        <link rel="stylesheet" href="../style/style.css" /> <!-- Lien avec la feuille de style en CSS -->
        <title>F1 guide</title> <!-- Titre de l'onglet -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"> <!-- Configuration du bootstrap -->

        <!-- Configuration du favicon avec une compatibilit√© maximale -->
        <link rel="apple-touch-icon" sizes="180x180" href="../images/favicon/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="../images/favicon/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="../images/favicon/favicon-16x16.png">
        <link rel="manifest" href="../images/favicon/site.webmanifest">
    </head>
    <body> <!-- Corps de la page (contenu visible)-->

        <section class="hero-image"> <!-- Image d'accueil -->
                <a style="color : white; text-decoration: none; font-size: xx-large; font-weight: bold;" href="#header">Start</a>
        </section>

        <main> <!-- Partie principale avec tout le reste du contenu -->
            <header class="main-header" id="header"> <!-- En-t√™te -->
                <nav> <!-- Barre de navigation -->
                    <img src="../images/F1_logo_sans_fond.png" alt="F1 Logo" class="header-logo">
                    <ul>
                        <li><a href="travail_projet.html#header">Classements</a></li>
                        <li><a href="courses.html#header">Courses</a></li>
                        <li><a class="active" href="#header">Circuits</a></li>
                        <li><a href="pilotes.html#header">Pilotes</a></li>
                        <li><a href="#contact">Contact</a></li>
                    </ul>
                </nav>
            </header>

            <section id="circuits">
                <select id="select-circuits" name="circuits"></select>
                <div class="tab-container">
                    <div> 
					    <h2>Carte du circuit</h2>
				    </div>
                    <div class="table-responsive"> <!-- Classe qui r√©f√©rence le bootstrap --> 
                        <h2>Informations circuit</h2>
					    <table class="table table-dark table-striped table-hover table-rounded">
                            <caption>Informations circuit</caption>
                            <thead>
                                <tr>
                                    <th>Information</th>
                                    <th>D√©tail</th>
                                </tr>
                            </thead>
                            <tbody id="infos-circuit">
                            </tbody>
                        </table>
				    </div>
                </div>
            </section>
        </main>

        <footer id="contact">
            <p>
                &copy; 2025 F1 Guide. Tous droits r√©serv√©s. <a href="../CV_Joaquim_DAUBAGNA--LEFEBVRE.pdf" target="_blank">Lien vers mon CV ‚Üí</a>
            </p>
        </footer>
    </body>






    
    <script>
        // --- Variables globales ---
        const circuitSelect = document.getElementById('select-circuits');
        let circuitsActuels = [];

        // --- 1. Fonction pour charger les circuits depuis l'API ---
        function chargerCircuits() {
            const url = 'https://api.jolpi.ca/ergast/f1/circuits/?limit=100';
            
            fetch(url)
                .then(response => response.json())
                .then(data => {                    
                    circuitsActuels = data.MRData.CircuitTable.Circuits;
                    
                    // Trier les circuits par pays (ordre alphab√©tique)
                    circuitsActuels.sort((a, b) => {
                        return a.Location.country.localeCompare(b.Location.country);
                    });

                    circuitsActuels.forEach((circuit, index) => {
                        const option = document.createElement("option");
                        option.value = circuit.circuitId;
                        option.dataset.index = index;
                        option.textContent = `${circuit.Location.country} - ${circuit.circuitName}`;
                        circuitSelect.appendChild(option);
                    });
                    
                    // S√©lectionner automatiquement le premier circuit et afficher ses informations
                    if (circuitsActuels.length > 0) {
                        circuitSelect.value = circuitsActuels[0].circuitId;
                        afficherInfosCircuit(circuitsActuels[0].circuitId);
                    }
                })
                .catch(error => {
                    console.error('Erreur:', error);
                    circuitSelect.innerHTML = '<option value="">Erreur de chargement</option>';
                    afficherErreur('Impossible de charger les circuits');
                });
        }

        // --- 2. Fonction pour afficher les informations d'un circuit ---
        function afficherInfosCircuit(circuitId) {
            const circuit = circuitsActuels.find(c => c.circuitId === circuitId);
            
            const tabContainer = document.querySelector('.tab-container');
            
            // Mise √† jour de la carte du circuit
            const mapDiv = tabContainer.children[0];
            mapDiv.innerHTML = `
                <h2>Carte du circuit</h2>

                <!-- c) -->
                <img src="../images/circuits/${circuit.circuitId}.png" 
                    alt="Carte de ${circuit.circuitName}"
                    style="max-width: 100%; height: auto; border-radius: 8px;">
            `;
            
            // Mise √† jour du tableau de statistiques
            const tbody = document.getElementById('infos-circuit');
            tbody.innerHTML = '';
            
            // Tableau des informations √† afficher
            const infos = [
                { label: 'Nom du circuit', valeur: circuit.circuitName },
                { label: 'Pays', valeur: circuit.Location.country },
                { label: 'Ville', valeur: circuit.Location.locality },
                { label: 'Latitude', valeur: circuit.Location.lat },
                { label: 'Longitude', valeur: circuit.Location.long },

                // l)
                { label: 'Wikip√©dia', valeur: `<a href="${circuit.url}" target="_blank" rel="noopener noreferrer" style="color: #e10600; text-decoration: none; font-weight: bold;">üìñ Voir la page ‚Üí</a>` }

            ];
            
            // Cr√©er une ligne pour chaque information
            infos.forEach(info => {
                const ligne = tbody.insertRow();
                
                // Colonne titre (cat√©gorie)
                const cellTitre = ligne.insertCell();
                cellTitre.textContent = info.label;
                cellTitre.style.fontWeight = 'bold';
                
                // Colonne valeur
                const cellValeur = ligne.insertCell();
                cellValeur.innerHTML = info.valeur;
            });
        }

        // --- 3. Fonction qui affiche un message en cas d'erreur ---
        function afficherErreur(message) {
            const tabContainer = document.querySelector('.tab-container');
            const tbody = document.getElementById('infos-circuit');
            
            tabContainer.children[0].innerHTML = `<h2>Carte du circuit</h2><p style="color: #e10600;">${message}</p>`;
            tbody.innerHTML = `<tr><td colspan="2" class="no-data" style="color: #e10600;">${message}</td></tr>`;
        }

        // --- 4. √âcouteur d'√©v√©nement ---
        circuitSelect.addEventListener('change', function() {
                afficherInfosCircuit(this.value);
        });

        // --- 5. Initialisation ---
        // Charger automatiquement les circuits au d√©marrage
        window.addEventListener('load', function() {
            chargerCircuits();
        });
    </script>
</html>